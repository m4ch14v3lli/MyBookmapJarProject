<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (20) -->
<title>Layer1ApiSoundAlertMessage (Level1Api 7.6.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: velox.api.layer1.messages, class: Layer1ApiSoundAlertMessage">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">velox.api.layer1.messages</a></div>
<h1 title="Class Layer1ApiSoundAlertMessage" class="title">Class Layer1ApiSoundAlertMessage</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">velox.api.layer1.messages.Layer1ApiSoundAlertMessage</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../layers/Layer1ApiStrategiesEchoMessagesLayer.StrategyEchoMessageFromLayer.html" title="interface in velox.api.layer1.layers">Layer1ApiStrategiesEchoMessagesLayer.StrategyEchoMessageFromLayer</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">Layer1ApiSoundAlertMessage</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../layers/Layer1ApiStrategiesEchoMessagesLayer.StrategyEchoMessageFromLayer.html" title="interface in velox.api.layer1.layers">Layer1ApiStrategiesEchoMessagesLayer.StrategyEchoMessageFromLayer</a></span></div>
<div class="block">This message triggers Bookmap to show a notification/play sound alert.

 <h2 id="notification-system-examples-heading">Notification system examples</h2>
 <p>If you want to jump right into examples, take a look at
 <b><a href="https://github.com/BookmapAPI/DemoStrategies">DemoStrategies</a></b>
 project. Here is a brief explanation of what you can find there:
 </p>
 <ul>
 <li><b><code>velox.api.layer1.simpledemo.alerts.tradeprice.SimplePriceAlertDemo</code></b> -
 a basic demo that shows how you can create and send a single type of alerts. The process
 of developing this addon is described step-by-step below, in the section
 <i>Example of an addon leveraging notification system.</i></li>
 <li><b><code>velox.api.layer1.simpledemo.alerts.simplegui.SimpleAlertGuiDemo</code></b> -
 a "Hello-World" style demo showing how to incorporate your own GUI for managing
 notifications. Implemented step-by-step in <a href="Layer1ApiAlertGuiMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertGuiMessage</code></a> javadoc.</li>
 <li><b><code>velox.api.layer1.simpledemo.alerts.tradeprice.CustomPriceAlertDemo</code></b> - a more
 elaborate example of the notification system usage. Shows how an addon can create
 alerts dynamically, using its own GUI.</li>
 <li><b><code>velox.api.layer1.simpledemo.alerts.manual.Layer1ApiAlertDemo</code></b> - a "synthetic"
 example, allowing you to see as many features of the notification system as possible.
 Alerts are sent <em>manually</em> from the strategies dialog.</li>
 </ul>

 <h2 id="notification-system-step-by-step-guide-heading">Notification system step-by-step guide</h2>
 <p>
 The notification system has multiple moving parts and might seem intimidating
 at first glance. Below is a step-by-step guide to a simple addon development
 which sends alerts based on some market event.
 </p>
 <p>First, let's define a framework for interaction with the notification system.</p>
 <p>
 Just like in many other parts of Bookmap, an addon communicates with the Bookmap
 via special messages objects. That is, your addon should listen for messages via
 <a href="../Layer1ApiAdminListener.html#onUserMessage(java.lang.Object)"><code>Layer1ApiAdminListener.onUserMessage(Object)</code></a> and
 send them with <a href="../Layer1ApiAdminProvider.html#sendUserMessage(java.lang.Object)"><code>Layer1ApiAdminProvider.sendUserMessage(Object)</code></a>
 </p>

 <h3 id="notification-system-workflow-heading">Notification system workflow</h3>
 <p>The workflow looks like this:</p>
 <ul>
     <li>Register a UI for controlling addon's notifications with <a href="Layer1ApiAlertGuiMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertGuiMessage</code></a>
     (optional step, omitted in the example below)</li>
     <li>Declare a group of sound alerts by sending <a href="Layer1ApiSoundAlertDeclarationMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertDeclarationMessage</code></a>,
     store this message to later link it with actual notifications</li>
     <li>Setup listening for declarations messages with a flag isAdd = false</li>
     <li>Send an initial <a href="Layer1ApiAlertSettingsMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertSettingsMessage</code></a> for a
     new declaration, setup listening for alert settings coming from Bookmap</li>
     <li>When a trigger, defined internally by the addon occurs - send an actual alert with
     <a href="Layer1ApiSoundAlertMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage</code></a></li>
     <li>(optional) Cancel currently active alert with <a href="Layer1ApiSoundAlertCancelMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertCancelMessage</code></a> -
     this will close popup created by the alert, stop sound notification playback,
     and cancel all planned future executions if the alert is repeated
     (<a href="#repeatCount"><code>&gt; 1</code></a>)</li>
 </ul>

 <h3 id="example-of-an-addon-leveraging-notification-system-heading">Example of an addon leveraging notification system</h3>
 <p>Now, lets see how it all works together in a more realistic example</p>
 <p>
 Lets say we want to develop an addon which tracks the trades, and if there
 is a trade with price larger than 10 - we notify a user.
 </p>
 <p>First, we should create an entrypoint class, so or addon can be loaded by the
 Bookmap (this is the same process as for any other addon).</p>

 <pre>
 <code>@Layer1Attachable</code>
 <code>@Layer1StrategyName("Simple price alert demo")</code>
 <code>@Layer1ApiVersion(Layer1ApiVersionValue.VERSION2)</code>
 public class SimplePriceAlertDemo implements
     Layer1ApiAdminAdapter,
     Layer1ApiDataAdapter,
     Layer1ApiInstrumentAdapter,
     Layer1ApiFinishable {

     private Layer1ApiProvider provider;

     public SimplePriceAlertDemo(Layer1ApiProvider provider) {
         this.provider = provider;

         ListenableHelper.addListeners(provider, this);
     }

     <code>@Override</code>
     public void finish() {
     }
 }
 </pre>

 <p>Now, our addon can be loaded, and it also gets the underlying <a href="../Layer1ApiProvider.html" title="interface in velox.api.layer1"><code>Layer1ApiProvider</code></a> -
 the key entity in Bookmap API, which gives access to various types of events
 (note the subscription with <code>ListenableHelper</code>).
 Later we will also use the provider <b>to send messages to BM</b>. In addition, we need
 to implement <a href="../Layer1ApiFinishable.html" title="interface in velox.api.layer1"><code>Layer1ApiFinishable</code></a>, but we don't need to add any implementation
 for now</p>
 <p>Also, our class implements <a href="../Layer1ApiAdminAdapter.html" title="interface in velox.api.layer1"><code>Layer1ApiAdminAdapter</code></a> - which gives us ability
 to <b>listen for messages coming from BM</b> by implementing
 <a href="../Layer1ApiAdminAdapter.html#onUserMessage(java.lang.Object)"><code>Layer1ApiAdminAdapter.onUserMessage(Object)</code></a></p>
 <p>In addition, we want to listen for trades, and for that we implement <a href="../Layer1ApiDataAdapter.html" title="interface in velox.api.layer1"><code>Layer1ApiDataAdapter</code></a>,
 as its method <a href="../Layer1ApiDataAdapter.html#onTrade(java.lang.String,double,int,velox.api.layer1.data.TradeInfo)"><code>Layer1ApiDataAdapter.onTrade(String, double, int, TradeInfo)</code></a>
 does exactly what we want. Likewise, to show the correct trade price and size -
 we need to know the pips and size increment of the current instrument. We get this
 data from <a href="../Layer1ApiInstrumentAdapter.html#onInstrumentAdded(java.lang.String,velox.api.layer1.data.InstrumentInfo)"><code>Layer1ApiInstrumentAdapter.onInstrumentAdded(String, InstrumentInfo)</code></a></p>

 <p>Thus, we store the information of the instruments by adding the <code>aliasToInstrumentInfo</code>
 map, and update it using methods of <a href="../Layer1ApiInstrumentAdapter.html" title="interface in velox.api.layer1"><code>Layer1ApiInstrumentAdapter</code></a>:</p>
 <pre>
     private final Map&lt;String, InstrumentInfo&gt; aliasToInstrumentInfo = new ConcurrentHashMap&lt;&gt;();

     <code>@Override</code>
     public void onInstrumentAdded(String alias, InstrumentInfo instrumentInfo) {
         aliasToInstrumentInfo.put(alias, instrumentInfo);
     }

     <code>@Override</code>
     public void onInstrumentRemoved(String alias) {
         aliasToInstrumentInfo.remove(alias);
     }
 </pre>

 <p>Next step - lets listen for the trades, and start simple - write a message to logs
 when the trade with price &gt; 10 occurs:</p>

 <pre>
 <code>@Override</code>
 public void onTrade(String alias, double price, int size, TradeInfo tradeInfo) {
     InstrumentInfo instrumentInfo = aliasToInstrumentInfo.get(alias);
     double realPrice = price * instrumentInfo.pips;
     double realSize = size * (1 / instrumentInfo.sizeMultiplier);
     if (realSize != 0 &amp;&amp; realPrice &gt; 10) {
         // Here, instead of writing to logs, we later want to send an alert
         Log.info(String.format("Trade of price &gt; 10 occurred, actual price={%.2f}, size={%.2f}", realPrice, realSize));
     }
 }
 </pre>
 <p>You might ask: <em>Why can't we just use the <code>price</code> and <code>size</code>
 - the arguments of <code>onTrade</code> method? Why should we bother multiplying it
 by the pips and dividing by sizeMultiplier?</em> And the answer is - Bookmap
 passes the price and size not as the "real" values, but as the <em>number of increments</em>.
 To make it clearer, lets say that for an instrument with <code>pips = 0.5</code>
 there was a trade with <code>realPrice = 50.0</code>. Now, we want to calculate the number of
 price increments to express the real price:<br>
 <code>incrementsNumber = realPrice / pips = 50.0 / 0.5 = 100</code>.<br>
 Thus, <code>100</code> is the value you will get in <code>price</code> argument, when
 the real trade price is <code>50.0</code>.
 </p>
 <p>But, here we want to perform the reversed operation - get the real price from
 the number of price increments using pips. For this we will use the following formula: <br>
 <b><code>realPrice = priceIncrementsNumber * pips</code></b>
 </p>
 <p>The same goes for the trade size - it is also represented as a number of increments,
 but instead of the increment size we have a <code>sizeMultiplier</code> - which is a reversed
 value to size increment. As an example, say that there was a trade of <code>realSize = 50.0</code>
 with <code>sizeMultiplier = 10</code>. To calculate the number of size increments we will use
 the formula:<br>
 <code>sizeIncrementsNumber = realSize * sizeMultiplier = 50.0 * 10 = 500</code> <br>
 However, in this case we are interested in getting the real size from the number of size
 increments:<br>
 <code>&lt;b&gt;realSize = sizeIncrementsNumber * (1 / sizeMultiplier)&lt;/b&gt;</code><br>
 </p>
 <p>Now, instead of plain logging, we want to use the notification
 system. Lets go through its workflow:</p>

 <h4 id="register-a-ui-for-controlling-addon-s-notifications-with-layer1apialertguimessage-heading">Register a UI for controlling addon's notifications with <a href="Layer1ApiAlertGuiMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertGuiMessage</code></a></h4>
 <p>To keep this example simple, we won't implement GUI for it. However, you
 can take a look at <a href="Layer1ApiAlertGuiMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertGuiMessage</code></a> javadoc</p>

 <h4 id="declare-a-group-of-sound-alerts-by-sending-layer1apisoundalertdeclarationmessage-store-this-message-to-later-link-it-with-actual-declarations-heading">Declare a group of sound alerts by sending <a href="Layer1ApiSoundAlertDeclarationMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertDeclarationMessage</code></a>,
    store this message to later link it with actual declarations</h4>
 <p>Lets think about our alert - how we want our user to see it. For this simple
 example, our alert will show popup, won't have sound notification
 and will be a single-shot (non-repeated) alert. It will be related to all available
 instruments aliases. A description for the trigger of this alert might be simply -
 "Trade price &gt; 10"</p>
 <p>With this description in mind lets create a declaration message and send it
 when our addon is loaded by Bookmap. This moment is indicated by
 <a href="UserMessageLayersChainCreatedTargeted.html" title="class in velox.api.layer1.messages"><code>UserMessageLayersChainCreatedTargeted</code></a> message. Thus, lets create an
 <code>initAlerts()</code> method, which will be called each time the addon is loaded.
 The method will send an alert declaration, and store it for later
 use as a class field:</p>
 <pre>
 private Layer1ApiSoundAlertDeclarationMessage declarationMessage;

 private final Object declarationLock = new Object();

 <code>@Override</code>
 public void onUserMessage(Object data) {
     if (data instanceof UserMessageLayersChainCreatedTargeted) {
         UserMessageLayersChainCreatedTargeted message = (UserMessageLayersChainCreatedTargeted) data;
         if (message.targetClass == SimplePriceAlertDemo.class) {
             synchronized (declarationLock) {
                 initAlerts();
             }
         }
     }
 }

 private void initAlerts() {
     declarationMessage = Layer1ApiSoundAlertDeclarationMessage.builder()
         .setTriggerDescription("Trade price &gt; 10")
         .setSource(SimplePriceAlertDemo.class)
         .setPopupAllowed(true)
         .setAliasMatcher(alias -&gt; true)
         .build();
     provider.sendUserMessage(declarationMessage);
 }
 </pre>
 <p><em>Note: </em> We also added a synchronization lock - <code>declarationLock</code>. Although
 for now the synchronization doesn't make any sense as we access the
 <code>declarationMessage</code> from one thread, later it will be accessed from
 different threads. Thus, we want to prevent a race condition from happening.</p>
 <p>If we did everything right - in Bookmap a new record should appear in the
 "Configure alerts" table - available via <em>File -&gt; Alerts -&gt; Configure alerts</em>.
 We <b>WON'T</b> see the notifications just yet, we are still setting them up.</p>
 <p>Next step in the notifications workflow is strongly connected to this one:</p>

 <h4 id="listen-for-declarations-messages-with-a-flag-isadd-false-heading">Listen for declarations messages with a flag isAdd = false</h4>
 <p>The idea is - when your addon sees this type of declaration message - it <b>should stop</b>
 sending notifications of that type. Your addon gets this types of events when
 a user clicks "Remove alert" button in <em>Configure alerts</em> table mentioned
 above. Thus, lets setup listening for this type of messages:</p>
 <pre>
 <code>@Override</code>
 public void onUserMessage(Object data) {
     if (data instanceof UserMessageLayersChainCreatedTargeted) {
         UserMessageLayersChainCreatedTargeted message = (UserMessageLayersChainCreatedTargeted) data;
         if (message.targetClass == SimplePriceAlertDemo.class) {
             synchronized (declarationLock) {
                 initAlerts();
             }
         }
     } else if (data instanceof Layer1ApiSoundAlertDeclarationMessage) {
         Layer1ApiSoundAlertDeclarationMessage obtainedDeclarationMessage = (Layer1ApiSoundAlertDeclarationMessage) data;
         if (obtainedDeclarationMessage.source == SimplePriceAlertDemo.class
             &amp;&amp; !obtainedDeclarationMessage.isAdd) {
             synchronized (declarationLock) {
                 declarationMessage = null;
             }
         }
     }
 }
 </pre>
 <p><em>A couple of notes:</em></p>
 <ul>
 <li>Here we have only one declaration message, while in the real application you might
 have multiple - in that case you can store them in a Map using id as a key,
 and when a message with the same id arrives - remove the value from the Map. However,
 the main idea of this guide is to introduce concepts one-by-one, and use as little
 non-necessary functionality as possible, so we won't be bothering with the multiple
 declarations just yet.
 </li>
 <li>
 As you might have noticed, we are not using the value of the declaration
 message - and it will be fixed soon.
 </li>
 </ul>

 <p>For now, lets go to the next step in the notifications workflow:</p>

 <h4 id="send-an-initial-layer1apialertsettingsmessage-for-a-new-declaration-and-listen-for-alert-settings-coming-from-bookmap-heading">Send an initial <a href="Layer1ApiAlertSettingsMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertSettingsMessage</code></a> for a
 new declaration, and listen for alert settings coming from Bookmap</h4>
 <p>The settings message is connected to a declaration message, and it can be used
 <b>to notify your addon about settings changes</b>, or, vice versa - <b>your addon
 can notify Bookmap about the settings changes</b>. Now, before we send the actual
 notifications, let's define the settings that will be used in the alert message,
 and send them to Bookmap. Also, we want to set up listening for the settings
 messages, which will look just like the listening for the declarations messages
 in the previous step. Below is the result of code changes:
 <pre>
 private Layer1ApiAlertSettingsMessage settingsMessage;

 private void initAlerts() {
     declarationMessage = Layer1ApiSoundAlertDeclarationMessage.builder()
         .setTriggerDescription("Trade price &gt; 10")
         .setSource(SimplePriceAlertDemo.class)
         .setPopupAllowed(true)
         .setAliasMatcher(alias -&gt; true)
         .build();
     provider.sendUserMessage(declarationMessage);

     settingsMessage = Layer1ApiAlertSettingsMessage
         .builder()
         .setDeclarationId(declarationMessage.id)
         .setPopup(true)
         .setSource(SimplePriceAlertDemo.class)
         .build();
     provider.sendUserMessage(settingsMessage);
 }

 <code>@Override</code>
 public void onUserMessage(Object data) {
     if (data instanceof UserMessageLayersChainCreatedTargeted) {
         UserMessageLayersChainCreatedTargeted message = (UserMessageLayersChainCreatedTargeted) data;
         if (message.targetClass == SimplePriceAlertDemo.class) {
             synchronized (declarationLock) {
                 initAlerts();
             }
         }
     } else if (data instanceof Layer1ApiSoundAlertDeclarationMessage) {
         Layer1ApiSoundAlertDeclarationMessage obtainedDeclarationMessage = (Layer1ApiSoundAlertDeclarationMessage) data;
         if (obtainedDeclarationMessage.source == SimplePriceAlertDemo.class
             &amp;&amp; !obtainedDeclarationMessage.isAdd) {
             synchronized (declarationLock) {
                 declarationMessage = null;
             }
         }
     } else if (data instanceof Layer1ApiAlertSettingsMessage) {
         Layer1ApiAlertSettingsMessage obtainedSettingsMessage = (Layer1ApiAlertSettingsMessage) data;
         if (obtainedSettingsMessage.source == SimplePriceAlertDemo.class) {
             settingsMessage = (Layer1ApiAlertSettingsMessage) data;
         }
     }
 }
 </pre>
 <p><em>Key points here:</em> we are sending the settings message,
 linking it to the specific declaration by id, <em>after this declaration has
 been sent</em>. As we decided in the very beginning,
 our notification has a popup, but no sound alert - and it is reflected in
 the settings message creation.</p>
 <p>Moving on to the next step in the workflow:</p>
 <h4 id="when-a-trigger-defined-internally-by-the-addon-occurs---send-an-actual-alert-with-layer1apisoundalertmessage-heading">
 When a trigger, defined internally by the addon occurs - send an actual alert
 with <a href="Layer1ApiSoundAlertMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage</code></a>
 </h4>
 <p>Now that we have everything in place, we are ready to send the actual notification: </p>
 <pre>
 <code>@Override</code>
 public void onTrade(String alias, double price, int size, TradeInfo tradeInfo) {
     InstrumentInfo instrumentInfo = aliasToInstrumentInfo.get(alias);
     double realPrice = price * instrumentInfo.pips;
     double realSize = size * (1 / instrumentInfo.sizeMultiplier);
     if (realSize != 0 &amp;&amp; realPrice &gt; 10) {
         Log.info(String.format("Trade of price &gt; 10 occurred, actual price={%.2f}, size={%.2f}", realPrice, realSize));
         synchronized (declarationLock) {
             if (declarationMessage != null) {
                 Layer1ApiSoundAlertMessage soundAlertMessage = Layer1ApiSoundAlertMessage.builder()
                     .setAlias(alias)
                     .setTextInfo(String.format("Trade actual price={%.2f}, size={%.2f}", realPrice, realSize))
                     .setAdditionalInfo("Trade of price &gt; 10")
                     .setShowPopup(settingsMessage.popup)
                     .setAlertDeclarationId(declarationMessage.id)
                     .setSource(SimplePriceAlertDemo.class)
                     .build();
                 provider.sendUserMessage(soundAlertMessage);
             }
         }
     }
 }
 </pre>
 <p>Here we specify all the data we want to show on the alert. Note that this message
 is linked with the <a href="Layer1ApiSoundAlertDeclarationMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertDeclarationMessage</code></a> by the
 <a href="#alertDeclarationId"><code>alertDeclarationId</code></a> field, and the settings
 (popup/sound notifications status) are taken from the stored <a href="Layer1ApiAlertSettingsMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertSettingsMessage</code></a>.
 This ensures data integrity between Bookmap and your addon.</p>
 <p>Note that although <a href="Layer1ApiSoundAlertMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage</code></a> has many fields which might
 look intimidating, only the <a href="#source"><code>source</code></a> and the
 <a href="#alertDeclarationId"><code>alertDeclarationId</code></a> are mandatory.
 </p>
 <p>If you did everything correctly, the addon should be able to send notifications
 now, and you can also control the popup state (on/off) with the Bookmap GUI (by
 pressing the "toggle popup" button in "Configure alerts" table)</p>
 <p>Although the alerts work as expected, there is one more thing worth a discussion:
 an addon can programmatically remove a declaration, by sending a declaration message
 with the same id and flag <a href="Layer1ApiSoundAlertDeclarationMessage.html#isAdd"><code>Layer1ApiSoundAlertDeclarationMessage.isAdd</code></a> = false.
 Let's see an example of how it can be done. For that we will implement the
 <a href="../Layer1ApiFinishable.html#finish()"><code>Layer1ApiFinishable.finish()</code></a> method.
 </p>
 <pre>
 <code>@Override</code>
 public void finish() {
     synchronized (declarationLock) {
         if (declarationMessage != null) {
             Layer1ApiSoundAlertDeclarationMessage removeDeclarationMessage = new Builder(declarationMessage)
                 .setIsAdd(false)
                 .build();
             provider.sendUserMessage(removeDeclarationMessage);
         }
     }
     aliasToInstrumentInfo.clear();
 }
 </pre>
 <p>Although Bookmap will try its best to remove any stale alerts
 when your addon is unloaded, it is a good practice to take care of the
 resources you used. Also, note that <code>finish()</code>, <code>onTrade()</code> and
 <code>onUserMessage()</code> are called from different threads, and this is
 why we needed synchronization.</p>

 <em>Full example source code can be found at
 <b><a href="https://github.com/BookmapAPI/DemoStrategies">DemoStrategies</a></b>
 project on Github  - check out
 <b><code>velox.api.layer1.simpledemo.alerts.tradeprice.SimplePriceAlertDemo</code></b></em></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="https://github.com/BookmapAPI/DemoStrategies">DemoStrategies</a></li>
<li><a href="Layer1ApiSoundAlertDeclarationMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertDeclarationMessage</code></a></li>
<li><a href="Layer1ApiSoundAlertCancelMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertCancelMessage</code></a></li>
<li><a href="Layer1ApiAlertSettingsMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertSettingsMessage</code></a></li>
<li><a href="Layer1ApiAlertGuiMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiAlertGuiMessage</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="Layer1ApiSoundAlertMessage.Builder.html" class="type-name-link" title="class in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.Builder</a></code></div>
<div class="col-last even-row-color">
<div class="block">Builder to build <a href="Layer1ApiSoundAlertMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="Layer1ApiSoundAlertMessage.SoundAlertStatus.html" class="type-name-link" title="enum class in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.SoundAlertStatus</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="Layer1ApiSoundAlertMessage.SoundAlertStatusListener.html" class="type-name-link" title="interface in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.SoundAlertStatusListener</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#additionalInfo" class="member-name-link">additionalInfo</a></code></div>
<div class="col-last even-row-color">
<div class="block">If not null, this text will be shown on the alert popup below the main
 message, specified in <a href="#textInfo"><code>textInfo</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#alertDeclarationId" class="member-name-link">alertDeclarationId</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The <a href="Layer1ApiSoundAlertDeclarationMessage.html#id"><code>Layer1ApiSoundAlertDeclarationMessage.id</code></a> of a linked alert declaration <br>
 Note that if you specify this field, there should already exist a registered
 declaration with the given id.</div>
</div>
<div class="col-first even-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#alertId" class="member-name-link">alertId</a></code></div>
<div class="col-last even-row-color">
<div class="block">This ID can be used to reference alert later (stop it)</div>
</div>
<div class="col-first odd-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#alias" class="member-name-link">alias</a></code></div>
<div class="col-last odd-row-color">
<div class="block">If not null the alert is considered linked to specific instrument</div>
</div>
<div class="col-first even-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color"><code><a href="#metadata" class="member-name-link">metadata</a></code></div>
<div class="col-last even-row-color">
<div class="block">This field will not be used anywhere outside of strategy code,
 but strategy can later use this field, for example, to determine if this
 message should be cancelled in
 <a href="Layer1ApiSoundAlertCancelMessage.Layer1ApiSoundMessagesFilter.html#shouldCancelMessage(velox.api.layer1.messages.Layer1ApiSoundAlertMessage)"><code>Layer1ApiSoundAlertCancelMessage.Layer1ApiSoundMessagesFilter.shouldCancelMessage(Layer1ApiSoundAlertMessage)</code></a></div>
</div>
<div class="col-first odd-row-color"><code>final int</code></div>
<div class="col-second odd-row-color"><code><a href="#priority" class="member-name-link">priority</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The priority value helps to order sound messages in a sound play queue.</div>
</div>
<div class="col-first even-row-color"><code>static final long</code></div>
<div class="col-second even-row-color"><code><a href="#REPEAT_COUNT_INFINITE" class="member-name-link">REPEAT_COUNT_INFINITE</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>final long</code></div>
<div class="col-second odd-row-color"><code><a href="#repeatCount" class="member-name-link">repeatCount</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Number of times sound will be repeated or <a href="#REPEAT_COUNT_INFINITE"><code>REPEAT_COUNT_INFINITE</code></a>
 for infinite replay (until cancelled by user).</div>
</div>
<div class="col-first even-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a></code></div>
<div class="col-second even-row-color"><code><a href="#repeatDelay" class="member-name-link">repeatDelay</a></code></div>
<div class="col-last even-row-color">
<div class="block">Delay between sound repetitions.</div>
</div>
<div class="col-first odd-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Image.html" title="class or interface in java.awt" class="external-link">Image</a></code></div>
<div class="col-second odd-row-color"><code><a href="#severityIcon" class="member-name-link">severityIcon</a></code></div>
<div class="col-last odd-row-color">
<div class="block">If not null, the icon is shown on the alert popup.</div>
</div>
<div class="col-first even-row-color"><code>final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#showPopup" class="member-name-link">showPopup</a></code></div>
<div class="col-last even-row-color">
<div class="block">If true, popup will be shown containing <a href="#textInfo"><code>textInfo</code></a> (which must not be null)</div>
</div>
<div class="col-first odd-row-color"><code>final byte[]</code></div>
<div class="col-second odd-row-color"><code><a href="#sound" class="member-name-link">sound</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Binary data for the sound to be played.</div>
</div>
<div class="col-first even-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#source" class="member-name-link">source</a></code></div>
<div class="col-last even-row-color">
<div class="block">Class that created this message.</div>
</div>
<div class="col-first odd-row-color"><code>final <a href="Layer1ApiSoundAlertMessage.SoundAlertStatusListener.html" title="interface in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.SoundAlertStatusListener</a></code></div>
<div class="col-second odd-row-color"><code><a href="#statusListener" class="member-name-link">statusListener</a></code></div>
<div class="col-last odd-row-color">
<div class="block">This listener will be notified each time the sound alert status is changed <br>
 <b>Note: </b> after the <a href="../Layer1ApiFinishable.html#finish()"><code>Layer1ApiFinishable.finish()</code></a> method for the strategy is called,
 no further method calls will be made to this listener.</div>
</div>
<div class="col-first even-row-color"><code>final <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#textInfo" class="member-name-link">textInfo</a></code></div>
<div class="col-last even-row-color">
<div class="block">Text description of a message, will be displayed in alerts dialog</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(byte%5B%5D,java.lang.String,long,java.time.Duration,velox.api.layer1.messages.Layer1ApiSoundAlertMessage.SoundAlertStatusListener,java.lang.Class,java.lang.Object)" class="member-name-link">Layer1ApiSoundAlertMessage</a><wbr>(byte[]&nbsp;sound,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;textInfo,
 long&nbsp;repeatCount,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;repeatDelay,
 <a href="Layer1ApiSoundAlertMessage.SoundAlertStatusListener.html" title="interface in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.SoundAlertStatusListener</a>&nbsp;statusListener,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;source,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;metadata)</code></div>
<div class="col-last even-row-color">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">This constructor does not provide the full functionality</div>
</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(java.lang.String)" class="member-name-link">Layer1ApiSoundAlertMessage</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;alertId)</code></div>
<div class="col-last odd-row-color">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">Use <a href="Layer1ApiSoundAlertCancelMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertCancelMessage</code></a> instead</div>
</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="Layer1ApiSoundAlertMessage.Builder.html" title="class in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#builder()" class="member-name-link">builder</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Creates builder to build <a href="Layer1ApiSoundAlertMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isCancelMessage()" class="member-name-link">isCancelMessage</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">True if the message was created via <a href="#%3Cinit%3E(java.lang.String)"><code>Layer1ApiSoundAlertMessage(java.lang.String)</code></a> constructor</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="REPEAT_COUNT_INFINITE">
<h3>REPEAT_COUNT_INFINITE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">REPEAT_COUNT_INFINITE</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#velox.api.layer1.messages.Layer1ApiSoundAlertMessage.REPEAT_COUNT_INFINITE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="sound">
<h3>sound</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">sound</span></div>
<div class="block">Binary data for the sound to be played. Please do not modify array after
 you pass it to the message. Multiple messages can share same sound data.</div>
</section>
</li>
<li>
<section class="detail" id="textInfo">
<h3>textInfo</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">textInfo</span></div>
<div class="block">Text description of a message, will be displayed in alerts dialog</div>
</section>
</li>
<li>
<section class="detail" id="showPopup">
<h3>showPopup</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">showPopup</span></div>
<div class="block">If true, popup will be shown containing <a href="#textInfo"><code>textInfo</code></a> (which must not be null)</div>
</section>
</li>
<li>
<section class="detail" id="repeatCount">
<h3>repeatCount</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">repeatCount</span></div>
<div class="block">Number of times sound will be repeated or <a href="#REPEAT_COUNT_INFINITE"><code>REPEAT_COUNT_INFINITE</code></a>
 for infinite replay (until cancelled by user).</div>
</section>
</li>
<li>
<section class="detail" id="repeatDelay">
<h3>repeatDelay</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a></span>&nbsp;<span class="element-name">repeatDelay</span></div>
<div class="block">Delay between sound repetitions.</div>
</section>
</li>
<li>
<section class="detail" id="alertId">
<h3>alertId</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">alertId</span></div>
<div class="block">This ID can be used to reference alert later (stop it)</div>
</section>
</li>
<li>
<section class="detail" id="statusListener">
<h3>statusListener</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="Layer1ApiSoundAlertMessage.SoundAlertStatusListener.html" title="interface in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.SoundAlertStatusListener</a></span>&nbsp;<span class="element-name">statusListener</span></div>
<div class="block">This listener will be notified each time the sound alert status is changed <br>
 <b>Note: </b> after the <a href="../Layer1ApiFinishable.html#finish()"><code>Layer1ApiFinishable.finish()</code></a> method for the strategy is called,
 no further method calls will be made to this listener.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="Layer1ApiSoundAlertMessage.SoundAlertStatus.html" title="enum class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage.SoundAlertStatus</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="source">
<h3>source</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;</span>&nbsp;<span class="element-name">source</span></div>
<div class="block">Class that created this message. The class must have <a href="../annotations/Layer1StrategyName.html" title="annotation interface in velox.api.layer1.annotations"><code>Layer1StrategyName</code></a> annotation present</div>
</section>
</li>
<li>
<section class="detail" id="metadata">
<h3>metadata</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">metadata</span></div>
<div class="block">This field will not be used anywhere outside of strategy code,
 but strategy can later use this field, for example, to determine if this
 message should be cancelled in
 <a href="Layer1ApiSoundAlertCancelMessage.Layer1ApiSoundMessagesFilter.html#shouldCancelMessage(velox.api.layer1.messages.Layer1ApiSoundAlertMessage)"><code>Layer1ApiSoundAlertCancelMessage.Layer1ApiSoundMessagesFilter.shouldCancelMessage(Layer1ApiSoundAlertMessage)</code></a></div>
</section>
</li>
<li>
<section class="detail" id="alias">
<h3>alias</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">alias</span></div>
<div class="block">If not null the alert is considered linked to specific instrument</div>
</section>
</li>
<li>
<section class="detail" id="alertDeclarationId">
<h3>alertDeclarationId</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">alertDeclarationId</span></div>
<div class="block"><p>The <a href="Layer1ApiSoundAlertDeclarationMessage.html#id"><code>Layer1ApiSoundAlertDeclarationMessage.id</code></a> of a linked alert declaration <br>
 Note that if you specify this field, there should already exist a registered
 declaration with the given id.
 </p>
 <p>
 Also, the fields of the alert and its linked declaration
 are checked for conformity, e. g. for a message with
 <b><a href="#repeatCount"><code>repeatCount</code></a> = 1</b>
 you cannot link a declaration message with
 <b><a href="Layer1ApiSoundAlertDeclarationMessage.html#isRepeated"><code>Layer1ApiSoundAlertDeclarationMessage.isRepeated</code></a> = true</b>
 </p></div>
</section>
</li>
<li>
<section class="detail" id="priority">
<h3>priority</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">priority</span></div>
<div class="block">The priority value helps to order sound messages in a sound play queue.
 If there are 2 or more messages waiting in a queue, the message with higher
 priority will be handled first. Order of handling messages with equal priority
 is not guaranteed. Default is 0</div>
</section>
</li>
<li>
<section class="detail" id="additionalInfo">
<h3>additionalInfo</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">additionalInfo</span></div>
<div class="block">If not null, this text will be shown on the alert popup below the main
 message, specified in <a href="#textInfo"><code>textInfo</code></a>.
 This field is optional</div>
</section>
</li>
<li>
<section class="detail" id="severityIcon">
<h3>severityIcon</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/Image.html" title="class or interface in java.awt" class="external-link">Image</a></span>&nbsp;<span class="element-name">severityIcon</span></div>
<div class="block">If not null, the icon is shown on the alert popup.
 You can add your own image or use the defaults from the <a href="../gui/Layer1DefaultAlertIcons.html" title="class in velox.api.layer1.gui"><code>Layer1DefaultAlertIcons</code></a><br>
 Default value is null</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(byte[],java.lang.String,long,java.time.Duration,velox.api.layer1.messages.Layer1ApiSoundAlertMessage.SoundAlertStatusListener,java.lang.Class,java.lang.Object)">
<h3>Layer1ApiSoundAlertMessage</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">public</span>&nbsp;<span class="element-name">Layer1ApiSoundAlertMessage</span><wbr><span class="parameters">(byte[]&nbsp;sound,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;textInfo,
 long&nbsp;repeatCount,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;repeatDelay,
 <a href="Layer1ApiSoundAlertMessage.SoundAlertStatusListener.html" title="interface in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.SoundAlertStatusListener</a>&nbsp;statusListener,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;source,
 <a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;metadata)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">This constructor does not provide the full functionality
 <p>Use <a href="Layer1ApiSoundAlertMessage.Builder.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage.Builder</code></a> instead </p></div>
</div>
<div class="block">Creates a message that will launch an alert.</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String)">
<h3>Layer1ApiSoundAlertMessage</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">public</span>&nbsp;<span class="element-name">Layer1ApiSoundAlertMessage</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;alertId)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment"><p>Use <a href="Layer1ApiSoundAlertCancelMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertCancelMessage</code></a> instead </p></div>
</div>
<div class="block">Creates a message that will stop an alert with specified alertId</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="isCancelMessage()">
<h3>isCancelMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isCancelMessage</span>()</div>
<div class="block">True if the message was created via <a href="#%3Cinit%3E(java.lang.String)"><code>Layer1ApiSoundAlertMessage(java.lang.String)</code></a> constructor</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>flag if the message is actually a cancel message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="builder()">
<h3>builder</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="Layer1ApiSoundAlertMessage.Builder.html" title="class in velox.api.layer1.messages">Layer1ApiSoundAlertMessage.Builder</a></span>&nbsp;<span class="element-name">builder</span>()</div>
<div class="block">Creates builder to build <a href="Layer1ApiSoundAlertMessage.html" title="class in velox.api.layer1.messages"><code>Layer1ApiSoundAlertMessage</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>created builder</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
